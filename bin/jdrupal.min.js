var jDrupal={};jdrupal_init();function jdrupal_init(){try{if(!jDrupal){jDrupal={}}jDrupal.csrf_token=false;jDrupal.sessid=null;jDrupal.user=jdrupal_user_defaults();jDrupal.settings={app_directory:"app",base_path:"/",cache:{entity:{enabled:false,expiration:3600},views:{enabled:false,expiration:3600}},debug:false,endpoint:"",file_public_path:"sites/default/files",language_default:"und",site_path:""};jDrupal.includes={};jDrupal.includes.module={};jDrupal.modules={core:{},contrib:{},custom:{}};jDrupal.services_queue={comment:{retrieve:{}},file:{retrieve:{}},node:{retrieve:{}},taxonomy_term:{retrieve:{}},taxonomy_vocabulary:{retrieve:{}},user:{retrieve:{}}}}catch(a){console.log("jdrupal_init - "+a)}}function date(l){try{var g=null;var f=null;if(arguments[1]){f=arguments[1];if(typeof f==="string"){f=parseInt(f)}g=new Date(f)}else{g=new Date();f=g.getTime()}var m="";for(var b=0;b<l.length;b++){var c=l.charAt(b);switch(c){case"d":var j=""+g.getDate();if(j.length==1){j="0"+j}m+=j;break;case"D":var j=g.getDay();switch(j){case 0:m+="Sun";break;case 1:m+="Mon";break;case 2:m+="Tue";break;case 3:m+="Wed";break;case 4:m+="Thu";break;case 5:m+="Fri";break;case 6:m+="Sat";break}break;case"j":m+=g.getDate();break;case"l":var j=g.getDay();switch(j){case 0:m+="Sunday";break;case 1:m+="Monday";break;case 2:m+="Tuesday";break;case 3:m+="Wednesday";break;case 4:m+="Thursday";break;case 5:m+="Friday";break;case 6:m+="Saturday";break}break;case"F":switch(g.getMonth()){case 0:m+="January";break;case 1:m+="February";break;case 2:m+="March";break;case 3:m+="April";break;case 4:m+="May";break;case 5:m+="June";break;case 6:m+="July";break;case 7:m+="August";break;case 8:m+="September";break;case 9:m+="October";break;case 10:m+="November";break;case 11:m+="December";break}break;case"m":var e=""+(g.getMonth()+1);if(e.length==1){e="0"+e}m+=e;break;case"Y":m+=g.getFullYear();break;case"H":var k=""+g.getHours();if(k.length==1){k="0"+k}m+=k;break;case"i":var a=""+g.getMinutes();if(a.length==1){a="0"+a}m+=a;break;default:m+=c;break}}return m}catch(h){console.log("date - "+h)}}function dpm(b){try{if(b){if(typeof parent.window.ripple==="function"){if(typeof arguments[1]!=="undefined"&&arguments[1]==false){console.log(JSON.stringify(b))}else{console.log(b)}}else{if(typeof b==="object"){console.log(JSON.stringify(b))}else{console.log(b)}}}else{if(b==""){console.log("<empty-string>")}else{console.log("<null>")}}}catch(a){console.log("dpm - "+a)}}function jdrupal_user_defaults(){try{return{uid:"0",roles:{"1":"anonymous user"},permissions:[]}}catch(a){console.log("jdrupal_user_defaults - "+a)}}function empty(b){try{if(typeof b==="object"){return Object.keys(b).length===0}return(typeof b==="undefined"||b===null||b=="")}catch(a){console.log("empty - "+a)}}function function_exists(name){try{return(eval("typeof "+name)=="function")}catch(error){alert("function_exists - "+error)}}function http_status_code_title(a){try{var c="";switch(a){case 200:c="OK";break;case 401:c="Unauthorized";break;case 404:c="Not Found";break;case 406:c="Not Acceptable";break;case 500:c="Internal Server Error";break}return c}catch(b){console.log("http_status_code_title - "+b)}}function in_array(e,d){try{if(typeof d==="undefined"){return false}if(typeof e==="string"){return(d.indexOf(e)>-1)}else{var c=false;for(var b=0;b<d.length;b++){if(d[b]==e){c=true;break}}return c}}catch(a){console.log("in_array - "+a)}}function is_int(a){if(typeof a==="string"){a=parseInt(a)}return typeof a==="number"&&a%1==0}function language_default(){try{if(jDrupal.settings.language_default&&jDrupal.settings.language_default!=""){return jDrupal.settings.language_default}return"und"}catch(a){console.log("language_default - "+a)}}function module_exists(b){try{var c=false;if(typeof jDrupal.modules.core[b]!=="undefined"){c=true}else{if(typeof jDrupal.modules.contrib[b]!=="undefined"){c=true}else{if(typeof jDrupal.modules.custom[b]!=="undefined"){c=true}}}return c}catch(a){console.log("module_exists - "+a)}}function shuffle(e){try{for(var d=e.length-1;d>0;d--){var c=Math.floor(Math.random()*(d+1));var a=e[d];e[d]=e[c];e[c]=a}return e}catch(b){console.log("shuffle - "+b)}}function time(){var a=new Date();return Math.floor(a/1000)}function ucfirst(b){b+="";var a=b.charAt(0).toUpperCase();return a+b.substr(1)}function module_implements(f){try{var g=[];if(f){var b=module_types();for(var e=0;e<b.length;e++){var a=b[e];for(var d in jDrupal.modules[a]){if(jDrupal.modules[a].hasOwnProperty(d)){if(function_exists(d+"_"+f)){g.push(d)}}}}}if(g.length==0){return false}return g}catch(c){console.log("module_implements - "+c)}}function module_invoke(c,e){try{var a=null;if(jdrupalgap_module_load(c)){var g=Array.prototype.slice.call(arguments);var f=c+"_"+e;if(function_exists(f)){var d=window[f];g.splice(0,2);if(Object.getOwnPropertyNames(g).length==0){a=d()}else{a=d.apply(null,g)}}}else{console.log("WARNING: module_invoke() - Failed to load module: "+c)}return a}catch(b){console.log("module_invoke - "+b)}}var module_invoke_results=null;var module_invoke_continue=null;function module_invoke_all(h){try{module_invoke_results=new Array();var a=Array.prototype.slice.call(arguments);a.splice(0,1);module_invoke_continue=true;var j=module_types();for(var c=0;c<j.length;c++){var k=j[c];for(var b in jDrupal.modules[k]){if(jDrupal.modules[k].hasOwnProperty(b)){var d=b+"_"+h;if(function_exists(d)){var e=null;if(a.length==0){e=module_invoke(b,h)}else{a.unshift(b,h);var g=window.module_invoke;e=g.apply(null,a);a.splice(0,2)}if(typeof e!=="undefined"){module_invoke_results.push(e)}}}}}return module_invoke_results}catch(f){console.log("module_invoke_all - "+f)}}function module_load(d){try{var b=module_types();for(var e=0;e<b.length;e++){var a=b[e];if(jDrupal.modules[a][d]){return jDrupal.modules[a][d]}}return false}catch(c){console.log("module_load - "+c)}}function module_object_template(b){try{return{name:b}}catch(a){console.log("module_object_template - "+a)}}function module_types(){try{return["core","contrib","custom"]}catch(a){console.log("module_types - "+a)}}function comment_load(c,b){try{entity_load("comment",c,b)}catch(a){console.log("comment_load - "+a)}}function comment_save(c,b){try{entity_save("comment",null,c,b)}catch(a){console.log("comment_save - "+a)}}function entity_delete(a,e,c){try{var f=a+"_delete";if(function_exists(f)){var d=window[f];d(e,c)}else{console.log("WARNING: entity_delete - unsupported type: "+a)}}catch(b){console.log("entity_delete - "+b)}}function entity_id_parse(a){try{var c=a;if(typeof c==="string"){c=parseInt(a)}return c}catch(b){console.log("entity_id_parse - "+b)}}function entity_local_storage_key(a,c){try{return a+"_"+c}catch(b){jdrupalgap_error(b)}}function entity_load(g,a,l){try{if(!is_int(a)){var c="entity_load("+g+") - only single ids supported!";console.log(c);return}var b=a;b=entity_id_parse(b);if(_services_queue_already_queued(g,"retrieve",b,"success")){if(jDrupal.settings.cache.entity.enabled){e=_entity_local_storage_load(g,b,l);if(e){if(l.success){l.success(e)}return}}if(typeof l.success!=="undefined"){_services_queue_callback_add(g,"retrieve",b,"success",l.success)}if(typeof l.error!=="undefined"){_services_queue_callback_add(g,"retrieve",b,"error",l.error)}return}_services_queue_add_to_queue(g,"retrieve",b);_services_queue_callback_add(g,"retrieve",b,"success",l.success);var e=false;if(jDrupal.settings.cache.entity.enabled){e=_entity_local_storage_load(g,b,l);if(e){if(l.success){l.success(e)}return}}if(!in_array(g,entity_types())){var k="WARNING: entity_load - unsupported type: "+g;console.log(k);if(l.error){l.error(null,null,k)}return}var f=entity_primary_key(g);var d={success:function(q){try{e=q;if(jDrupal.settings.cache.entity&&jDrupal.settings.cache.entity.enabled){if(jDrupal.settings.cache.entity.expiration!=="undefined"){var n=time()+jDrupal.settings.cache.entity.expiration;if(jDrupal.settings.cache.entity.expiration==0){n=0}e.expiration=n}_entity_local_storage_save(g,b,e)}var m=jDrupal.services_queue[g]["retrieve"][b].success;for(var p=0;p<m.length;p++){m[p](e)}jDrupal.services_queue[g]["retrieve"][b].success=[]}catch(o){console.log("entity_load - success - "+o)}},error:function(p,m,o){try{if(l.error){l.error(p,m,o)}}catch(n){console.log("entity_load - error - "+n)}}};var h=g+"_retrieve";if(function_exists(h)){d[f]=b;var j=window[h];j(a,d)}else{console.log("WARNING: "+h+"() does not exist!")}}catch(i){console.log("entity_load - "+i)}}function _entity_local_storage_load(d,a,f){try{var c=false;if(f){if(f.reset){_entity_local_storage_delete(d,a)}}var b=entity_local_storage_key(d,a);c=window.localStorage.getItem(b);if(c){c=JSON.parse(c);if(typeof c.expiration!=="undefined"&&c.expiration!=0&&time()>c.expiration){_entity_local_storage_delete(d,a);c=false}else{if(jdrupalgap&&jdrupalgap.page.options&&jdrupalgap.page.options.reloadingPage){if(typeof jdrupalgap.page.options.reset!=="undefined"&&jdrupalgap.page.options.reset==false){return c}else{_entity_local_storage_delete(d,a);c=false}}}}return c}catch(e){console.log("_entity_load_from_local_storage - "+e)}}function _entity_local_storage_save(c,a,b){try{window.localStorage.setItem(entity_local_storage_key(c,a),JSON.stringify(b))}catch(d){console.log("_entity_local_storage_save - "+d)}}function _entity_local_storage_delete(b,a){try{var d=entity_local_storage_key(b,a);window.localStorage.removeItem(d)}catch(c){console.log("_entity_local_storage_delete - "+c)}}function entity_primary_key(a){try{var c;switch(a){case"comment":c="cid";break;case"file":c="fid";break;case"node":c="nid";break;case"taxonomy_term":c="tid";break;case"taxonomy_vocabulary":c="vid";break;case"user":c="uid";break;default:var e=a+"_primary_key";if(jdrupalgap_function_exists(e)){var d=window[e];c=d(a)}else{var f="entity_primary_key - unsupported entity type ("+a+") - to add support, declare "+e+"() and have it return the primary key column name as a string";console.log(f)}break}return c}catch(b){console.log("entity_primary_key - "+b)}}function entity_save(c,a,b,e){try{var g;switch(c){case"comment":if(!b.cid){g="comment_create"}else{g="comment_update"}break;case"file":g="file_create";break;case"node":if(!b.language){b.language=language_default()}if(!b.nid){g="node_create"}else{g="node_update"}break;case"user":if(!b.uid){g="user_create"}else{g="user_update"}break;case"taxonomy_term":if(!b.tid){g="taxonomy_term_create"}else{g="taxonomy_term_update"}break;case"taxonomy_vocabulary":if(!b.vid){g="taxonomy_vocabulary_create"}else{g="taxonomy_vocabulary_update"}break}if(g&&function_exists(g)){var f=window[g];f(b,e)}else{console.log("WARNING: entity_save - unsupported type: "+c)}}catch(d){console.log("entity_save - "+d)}}function entity_types(){try{return["comment","file","node","taxonomy_term","taxonomy_vocabulary","user"]}catch(a){console.log("entity_types - "+a)}}function file_load(c,b){try{entity_load("file",c,b)}catch(a){console.log("file_load - "+a)}}function file_save(c,b){try{entity_save("file",null,c,b)}catch(a){console.log("file_save - "+a)}}function node_load(c,b){try{entity_load("node",c,b)}catch(a){console.log("node_load - "+a)}}function node_save(c,b){try{entity_save("node",c.type,c,b)}catch(a){console.log("node_save - "+a)}}function taxonomy_term_load(c,b){try{entity_load("taxonomy_term",c,b)}catch(a){console.log("taxonomy_term_load - "+a)}}function taxonomy_term_save(c,b){try{entity_save("taxonomy_term",null,c,b)}catch(a){console.log("taxonomy_term_save - "+a)}}function taxonomy_vocabulary_load(a,c){try{entity_load("taxonomy_vocabulary",a,c)}catch(b){console.log("taxonomy_vocabulary_load - "+b)}}function taxonomy_vocabulary_save(c,b){try{entity_save("taxonomy_vocabulary",null,c,b)}catch(a){console.log("taxonomy_vocabulary_save - "+a)}}function user_load(c,b){try{entity_load("user",c,b)}catch(a){console.log("user_load - "+a)}}function user_save(c,b){try{entity_save("user",null,c,b)}catch(a){console.log("user_save - "+a)}}function user_password(){try{var e=10;if(arguments[0]){e=arguments[0]}var c="";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz23456789";for(var d=0;d<e;d++){c+=b.charAt(Math.floor(Math.random()*b.length))}return c}catch(a){console.log("user_password - "+a)}}jDrupal.services={};jDrupal.services.call=function(c){try{c.debug=false;if(!services_ready()){var b="Set the site_path and endpoint on jDrupal.settings!";c.error(null,null,b);return}module_invoke_all("services_preprocess",c);var d=new XMLHttpRequest();var a=jDrupal.settings.site_path+jDrupal.settings.base_path+"?q=";if(typeof c.endpoint==="undefined"){a+=jDrupal.settings.endpoint+"/"}else{if(c.endpoint!=""){a+=c.endpoint+"/"}}a+=c.path;var e=c.method.toUpperCase();if(jDrupal.settings.debug){console.log(e+": "+a)}d.onload=function(j){try{if(d.readyState==4){var k=d.status+" - "+http_status_code_title(d.status);if(d.status==200){if(jDrupal.settings.debug){console.log("200 - OK")}var f=null;var g=d.getResponseHeader("Content-Type");if(g.indexOf("application/json")==-1){console.log("jDrupal.services.call - ERROR - response header was "+g+" instead of application/json");console.log(d.responseText)}else{f=JSON.parse(d.responseText)}module_invoke_all("services_request_pre_postprocess_alter",c,f);c.success(f);module_invoke_all("services_request_postprocess_alter",c,f);module_invoke_all("services_postprocess",c,f)}else{if(jDrupal.settings.debug){console.log(e+": "+a+" - "+k);console.log(d.responseText);console.log(d.getAllResponseHeaders())}if(d.responseText){console.log(d)}else{dpm(d)}if(typeof c.error!=="undefined"){var i=d.responseText||"";if(!i||i==""){i=k}c.error(d,d.status,i)}module_invoke_all("services_postprocess",c,d)}}else{console.log("jDrupal.services.call - request.readyState = "+d.readyState)}}catch(h){if(jDrupal.settings.debug){console.log(e+" (ERROR): "+a+" - "+k);console.log(d.responseText);console.log(d.getAllResponseHeaders())}console.log("jDrupal.services.call - onload - "+h)}};services_get_csrf_token({debug:c.debug,success:function(h){try{var i=true;if(typeof c.async!=="undefined"&&c.async===false){i=false}d.open(e,a,i);var j=null;if(e=="POST"){j="application/json";if(c.service=="user"&&c.resource=="login"){j="application/x-www-form-urlencoded"}}else{if(e=="PUT"){j="application/json"}}if(c.contentType){j=c.contentType}if(j){d.setRequestHeader("Content-type",j)}if(h){d.setRequestHeader("X-CSRF-Token",h)}if(typeof c.data!=="undefined"){if(jDrupal.settings.debug){var f=true;if(c.service=="user"&&in_array(c.resource,["login","create","update"])){f=false}if(f){if(typeof c.data==="object"){console.log(JSON.stringify(c.data))}else{console.log(c.data)}}}d.send(c.data)}else{d.send(null)}}catch(g){console.log("jDrupal.services.call - services_get_csrf_token - success - "+g)}},error:function(i,f,h){try{console.log("jDrupal.services.call - services_get_csrf_token - "+h);if(c.error){c.error(i,f,h)}}catch(g){console.log("jDrupal.services.call - services_get_csrf_token - error - "+g)}}})}catch(b){console.log("jDrupal.services.call - error - "+b)}};function services_get_csrf_token(b){try{var c;if(b.reset){jDrupal.sessid=null}if(jDrupal.sessid){c=jDrupal.sessid}if(c){if(b.success){b.success(c)}return}var e=new XMLHttpRequest();var d=jDrupal.settings.site_path+jDrupal.settings.base_path+"?q=services/session/token";e.onload=function(g){try{if(e.readyState==4){var h=e.status+" - "+http_status_code_title(e.status);if(e.status!=200){console.log(d+" - "+h);console.log(e.responseText)}else{c=e.responseText;jDrupal.sessid=c;if(b.success){b.success(c)}}}else{console.log("services_get_csrf_token - readyState - "+e.readyState)}}catch(f){console.log("services_get_csrf_token - token_request. onload - "+f)}};e.open("GET",d,true);e.send(null)}catch(a){console.log("services_get_csrf_token - "+a)}}function services_ready(){try{var a=true;if(jDrupal.settings.site_path==""){a=false;console.log("jjDrupal's jDrupal.settings.site_path is not set!")}if(jDrupal.settings.endpoint==""){a=false;console.log("jjDrupal's jDrupal.settings.endpoint is not set!")}return a}catch(b){console.log("services_ready - "+b)}}function services_resource_defaults(c,a,d){try{if(!c.service){c.service=a}if(!c.resource){c.resource=d}}catch(b){console.log("services_resource_defaults - "+b)}}function _services_queue_already_queued(c,f,b,e){try{var g=false;if(typeof jDrupal.services_queue[c][f][b]!=="undefined"){var a=jDrupal.services_queue[c][f][b];if(a[e].length!=0){g=true}}return g}catch(d){console.log("_services_queue_already_queued - "+d)}}function _services_queue_add_to_queue(b,d,a){try{jDrupal.services_queue[b][d][a]={entity_id:a,success:[],error:[]}}catch(c){console.log("_services_queue_add_to_queue - "+c)}}function _services_queue_remove_from_queue(b,d,a){try{console.log("WARNING: services_queue_remove_from_queue() not done yet!")}catch(c){console.log("_services_queue_remove_from_queue - "+c)}}function _services_queue_callback_add(b,e,a,d,f){try{jDrupal.services_queue[b][e][a][d].push(f)}catch(c){console.log("_services_queue_callback_add - "+c)}}function _services_queue_callback_count(b,f,a,d){try{var e=jDrupal.services_queue[b][f][a][d].length;return e}catch(c){console.log("_services_queue_callback_count - "+c)}}function comment_create(c,b){try{services_resource_defaults(b,"comment","create");entity_create("comment",null,c,b)}catch(a){console.log("comment_create - "+a)}}function comment_retrieve(c,b){try{services_resource_defaults(b,"comment","retrieve");entity_retrieve("comment",c,b)}catch(a){console.log("comment_retrieve - "+a)}}function comment_update(c,b){try{services_resource_defaults(b,"comment","update");entity_update("comment",null,c,b)}catch(a){console.log("comment_update - "+a)}}function comment_delete(c,b){try{services_resource_defaults(b,"comment","delete");entity_delete("comment",c,b)}catch(a){console.log("comment_delete - "+a)}}function comment_index(c,b){try{services_resource_defaults(b,"comment","index");entity_index("comment",c,b)}catch(a){console.log("comment_index - "+a)}}function entity_create(c,a,b,e){try{jDrupal.services.call({method:"POST",async:e.async,path:c+".json",service:e.service,resource:e.resource,entity_type:c,bundle:a,data:JSON.stringify(b),success:function(g){try{if(e.success){e.success(g)}}catch(f){console.log("entity_create - success - "+f)}},error:function(i,f,h){try{if(e.error){e.error(i,f,h)}}catch(g){console.log("entity_create - error - "+g)}}})}catch(d){console.log("entity_create - "+d)}}function entity_retrieve(a,d,c){try{jDrupal.services.call({method:"GET",path:a+"/"+d+".json",service:c.service,resource:c.resource,entity_type:a,entity_id:d,success:function(f){try{if(c.success){c.success(f)}}catch(e){console.log("entity_retrieve - success - "+e)}},error:function(h,e,g){try{if(c.error){c.error(h,e,g)}}catch(f){console.log("entity_retrieve - error - "+f)}}})}catch(b){console.log("entity_retrieve - "+b)}}function entity_update(c,a,b,f){try{var g=_entity_wrap(c,b);var e=entity_primary_key(c);jDrupal.services.call({method:"PUT",path:c+"/"+b[e]+".json",service:f.service,resource:f.resource,entity_type:c,entity_id:b[entity_primary_key(c)],bundle:a,data:JSON.stringify(g),success:function(i){try{_entity_local_storage_delete(c,b[e]);if(f.success){f.success(i)}}catch(h){console.log("entity_update - success - "+h)}},error:function(k,h,j){try{if(f.error){f.error(k,h,j)}}catch(i){console.log("entity_update - error - "+i)}}})}catch(d){console.log("entity_update - "+d)}}function entity_delete(b,a,d){try{jDrupal.services.call({method:"DELETE",path:b+"/"+a+".json",service:d.service,resource:d.resource,entity_type:b,entity_id:a,success:function(f){try{_entity_local_storage_delete(b,a);if(d.success){d.success(f)}}catch(e){console.log("entity_delete - success - "+e)}},error:function(h,e,g){try{if(d.error){d.error(h,e,g)}}catch(f){console.log("entity_delete - error - "+f)}}})}catch(c){console.log("entity_delete - "+c)}}function entity_index(a,e,c){try{var d;if(typeof e==="object"){d=entity_index_build_query_string(e)}else{if(typeof e==="string"){d=e}}if(d){d="&"+d}else{d=""}jDrupal.services.call({method:"GET",path:a+".json"+d,service:c.service,resource:c.resource,entity_type:a,success:function(f){try{if(c.success){c.success(f)}}catch(g){console.log("entity_index - success - "+g)}},error:function(i,f,h){try{if(c.error){c.error(i,f,h)}}catch(g){console.log("entity_index - error - "+g)}}})}catch(b){console.log("entity_index - "+b)}}function entity_index_build_query_string(d){try{var j="";if(!d){return j}if(d.fields){var b="";for(var a=0;a<d.fields.length;a++){b+=encodeURIComponent(d.fields[a])+","}if(b!=""){b="fields="+b.substring(0,b.length-1);j+=b+"&"}}if(d.parameters){var h="";for(var e in d.parameters){if(d.parameters.hasOwnProperty(e)){var g=encodeURIComponent(e);var f=encodeURIComponent(d.parameters[e]);h+="parameters["+g+"]="+f+"&"}}if(h!=""){h=h.substring(0,h.length-1);j+=h+"&"}}if(typeof d.page!=="undefined"){j+="page="+encodeURIComponent(d.page)+"&"}if(typeof d.page_size!=="undefined"){j+="page_size="+encodeURIComponent(d.page_size)+"&"}return j.substring(0,j.length-1)}catch(c){console.log("entity_index_build_query_string - "+c)}}function _entity_wrap(b,a){try{var d={};if(b=="taxonomy_term"||b=="taxonomy_vocabulary"||b=="user"||b.indexOf("commerce")!=-1){d=a}else{d[b]=a}return d}catch(c){console.log("_entity_wrap - "+c)}}function file_create(c,b){try{services_resource_defaults(b,"file","create");entity_create("file",null,c,b)}catch(a){console.log("file_create - "+a)}}function file_retrieve(c,b){try{services_resource_defaults(b,"file","retrieve");entity_retrieve("file",c,b)}catch(a){console.log("file_retrieve - "+a)}}function node_create(c,b){try{services_resource_defaults(b,"node","create");entity_create("node",c.type,c,b)}catch(a){console.log("node_create - "+a)}}function node_retrieve(c,b){try{services_resource_defaults(b,"node","retrieve");entity_retrieve("node",c,b)}catch(a){console.log("node_retrieve - "+a)}}function node_update(c,b){try{services_resource_defaults(b,"node","update");entity_update("node",c.type,c,b)}catch(a){console.log("node_update - "+a)}}function node_delete(c,b){try{services_resource_defaults(b,"node","delete");entity_delete("node",c,b)}catch(a){console.log("node_delete - "+a)}}function node_index(c,b){try{services_resource_defaults(b,"node","index");entity_index("node",c,b)}catch(a){console.log("node_index - "+a)}}function system_connect(b){try{var c={service:"system",resource:"connect",method:"POST",path:"system/connect.json",success:function(e){try{jDrupal.user=e.user;if(b.success){b.success(e)}}catch(d){console.log("system_connect - success - "+d)}},error:function(g,d,f){try{if(b.error){b.error(g,d,f)}}catch(e){console.log("system_connect - error - "+e)}}};if(!jDrupal.csrf_token){services_get_csrf_token({success:function(e){try{if(b.debug){console.log("Grabbed new token.")}jDrupal.csrf_token=true;jDrupal.services.call(c)}catch(d){console.log("system_connect - services_csrf_token - success - "+message)}},error:function(g,d,f){try{if(b.error){b.error(g,d,f)}}catch(e){console.log("system_connect - services_csrf_token - error - "+f)}}})}else{if(b.debug){console.log("Token already available.")}jDrupal.services.call(c)}}catch(a){console.log("system_connect - "+a)}}function taxonomy_term_create(c,b){try{services_resource_defaults(b,"taxonomy_term","create");entity_create("taxonomy_term",null,c,b)}catch(a){console.log("taxonomy_term_create - "+a)}}function taxonomy_term_retrieve(c,b){try{services_resource_defaults(b,"taxonomy_term","retrieve");entity_retrieve("taxonomy_term",c,b)}catch(a){console.log("taxonomy_term_retrieve - "+a)}}function taxonomy_term_update(c,b){try{services_resource_defaults(b,"taxonomy_term","update");entity_update("taxonomy_term",null,c,b)}catch(a){console.log("taxonomy_term_update - "+a)}}function taxonomy_term_delete(c,b){try{services_resource_defaults(b,"taxonomy_term","delete");entity_delete("taxonomy_term",c,b)}catch(a){console.log("taxonomy_term_delete - "+a)}}function taxonomy_term_index(c,b){try{services_resource_defaults(b,"taxonomy_term","index");entity_index("taxonomy_term",c,b)}catch(a){console.log("taxonomy_term_index - "+a)}}function taxonomy_vocabulary_create(c,b){try{if(!c.machine_name&&c.name){c.machine_name=c.name.toLowerCase().replace(" ","_")}services_resource_defaults(b,"taxonomy_vocabulary","create");entity_create("taxonomy_vocabulary",null,c,b)}catch(a){console.log("taxonomy_vocabulary_create - "+a)}}function taxonomy_vocabulary_retrieve(c,b){try{services_resource_defaults(b,"taxonomy_vocabulary","retrieve");entity_retrieve("taxonomy_vocabulary",c,b)}catch(a){console.log("taxonomy_vocabulary_retrieve - "+a)}}function taxonomy_vocabulary_update(c,b){try{if(!c.machine_name||c.machine_name==""){var d="taxonomy_vocabulary_update - missing machine_name";console.log(d);if(b.error){b.error(null,406,d)}return}services_resource_defaults(b,"taxonomy_vocabulary","update");entity_update("taxonomy_vocabulary",null,c,b)}catch(a){console.log("taxonomy_vocabulary_update - "+a)}}function taxonomy_vocabulary_delete(a,c){try{services_resource_defaults(c,"taxonomy_vocabulary","delete");entity_delete("taxonomy_vocabulary",a,c)}catch(b){console.log("taxonomy_vocabulary_delete - "+b)}}function taxonomy_vocabulary_index(c,b){try{services_resource_defaults(b,"taxonomy_vocabulary","index");entity_index("taxonomy_vocabulary",c,b)}catch(a){console.log("taxonomy_vocabulary_index - "+a)}}function user_create(c,b){try{services_resource_defaults(b,"user","create");entity_create("user",null,c,b)}catch(a){console.log("user_create - "+a)}}function user_retrieve(c,b){try{services_resource_defaults(b,"user","retrieve");entity_retrieve("user",c,b)}catch(a){console.log("user_retrieve - "+a)}}function user_update(c,b){try{var d="create";if(c.uid){d="update"}services_resource_defaults(b,"user",d);entity_update("user",null,c,b)}catch(a){console.log("user_update - "+a)}}function user_delete(c,b){try{services_resource_defaults(b,"user","create");entity_delete("user",c,b)}catch(a){console.log("user_delete - "+a)}}function user_index(c,b){try{services_resource_defaults(b,"user","create");entity_index("user",c,b)}catch(a){console.log("user_index - "+a)}}function user_register(c,b){try{jDrupal.services.call({service:"user",resource:"register",method:"POST",path:"user/register.json",data:JSON.stringify(c),success:function(e){try{if(b.success){b.success(e)}}catch(d){console.log("user_register - success - "+d)}},error:function(g,d,f){try{if(b.error){b.error(g,d,f)}}catch(e){console.log("user_register - error - "+e)}}})}catch(a){console.log("user_retrieve - "+a)}}function user_login(c,e,b){try{var d=true;if(!c||typeof c!=="string"){d=false;console.log("user_login - invalid name")}if(!e||typeof e!=="string"){d=false;console.log("user_login - invalid pass")}if(!d){if(b.error){b.error(null,406,"user_login - bad input")}return}jDrupal.services.call({service:"user",resource:"login",method:"POST",path:"user/login.json",data:"username="+encodeURIComponent(c)+"&password="+encodeURIComponent(e),success:function(g){try{jDrupal.user=g.user;jDrupal.sessid=null;services_get_csrf_token({success:function(i){try{if(b.success){system_connect({success:function(j){try{if(b.success){b.success(g)}}catch(k){console.log("user_login - system_connect - success - "+k)}},error:function(m,j,l){try{if(b.error){b.error(m,j,l)}}catch(k){console.log("user_login - system_connect - error - "+k)}}})}}catch(h){console.log("user_login - services_get_csrf_token - success - "+h)}},error:function(j,h,i){console.log("user_login - services_get_csrf_token - error - "+i);if(b.error){b.error(j,h,i)}}})}catch(f){console.log("user_login - success - "+f)}},error:function(i,f,h){try{if(b.error){b.error(i,f,h)}}catch(g){console.log("user_login - error - "+g)}}})}catch(a){console.log("user_login - "+a)}}function user_logout(b){try{jDrupal.services.call({service:"user",resource:"logout",method:"POST",path:"user/logout.json",success:function(d){try{jDrupal.user=jdrupal_user_defaults();jDrupal.sessid=null;system_connect({success:function(e){try{if(b.success){b.success(d)}}catch(f){console.log("user_logout - system_connect - success - "+f)}},error:function(h,e,g){try{if(b.error){b.error(h,e,g)}}catch(f){console.log("user_logout - system_connect - error - "+f)}}})}catch(c){console.log("user_logout - success - "+c)}},error:function(f,c,e){try{if(b.error){b.error(f,c,e)}}catch(d){console.log("user_logout - error - "+d)}}})}catch(a){console.log("user_login - "+a)}};